<app-header></app-header>
<div class="container-fluid" *ngIf="isLoaded">
  <h2>M-Tracker -> Home -> Edit User</h2>
  <hr>
  <h2>Edit User Details</h2>
  <div class="row-2">
    <div class="col">
      <mat-card>
        <form [formGroup]="editUserForm">
          <label for="">Name</label>
          <input type="text" class="form-control" placeholder="Full name.. " formControlName="name">
          <div *ngIf="submitted && editUserForm.get('name')?.invalid">
            <small *ngIf="editUserForm.get('name')?.errors?.['required']" class="alert alert-danger">
              Name is required...!
            </small>
            <small *ngIf="editUserForm.get('name')?.errors?.['pattern']" class="alert alert-danger">
              Invalid Name...!
            </small>
            <small *ngIf="editUserForm.get('name')?.errors?.['minlength']" class="alert alert-danger">
              Name can't be less than 5 characters..!
            </small>
          </div>
          <!--Email -->
          <label for="">Email</label>
          <input type="text" class="form-control" placeholder="Email.. abc@gmail.com" formControlName="email">
          <div *ngIf="submitted && editUserForm.get('email')?.invalid">
            <small *ngIf="editUserForm.get('email')?.errors?.['required']" class="alert alert-danger">
              Email is required..!
            </small>
            <small *ngIf="editUserForm.get('email')?.errors?.['email']" class="alert alert-danger">
              Invalid email..!
            </small>
          </div>
          <!--Mobile -->
          <label for="">Mobile</label>
          <input type="text" class="form-control" placeholder="Mobile.." formControlName="mobile">
          <div *ngIf="submitted && editUserForm.get('mobile')?.invalid">
            <small *ngIf="editUserForm.get('mobile')?.errors?.['required']" class="alert alert-danger">
              Mobile number is required..!
            </small>
            <small *ngIf="editUserForm.get('mobile')?.errors?.['pattern']" class="alert alert-danger">
              Invalid mobile number...!
            </small>
          </div>
          <!--Period date -->
          <label for="">Period Date</label>
          <input type="text" class="form-control" placeholder="Period date..  YYYY-MM-DD" formControlName="p_date">
          <div *ngIf="submitted && editUserForm.get('p_date')?.invalid">
            <small *ngIf="editUserForm.get('p_date')?.errors?.['required']" class="alert alert-danger">
              Date is required..!
            </small>
            <small *ngIf="editUserForm.get('p_date')?.errors?.['pattern']" class="alert alert-danger">
              Invalid date..!
            </small>
          </div>
          <!--Created date-->
          <label for="">Created Date</label>
          <input type="text" class="form-control" placeholder="Created date.. YYYY-MM-DD" name="c_date" formControlName="created_date">
          <div *ngIf="submitted && editUserForm.get('created_date')?.invalid">
            <small *ngIf="submitted && editUserForm.get('created_date')?.errors?.['required']" class="alert alert-danger">
              Date is required..!
            </small>
            <small *ngIf="submitted && editUserForm.get('created_date')?.errors?.['pattern']" class="alert alert-danger">
              Invalid date...!
            </small>
          </div>
          <!--Department -->
          <label for="">Department</label>
          <select class="form-control" (change)="onchange()" [(ngModel)]="dept" name="dept" formControlName="department">
            <option value="">Select Department...</option>
            <option *ngFor="let d of departments" [value]="d.department">{{d.department}}</option>
          </select>
          <!-- <input type="text" class="form-control" formControlName="department"> -->
          <div *ngIf="submitted && editUserForm.get('department')?.invalid">
            <small *ngIf="submitted && editUserForm.get('department')?.errors?.['required']" class="alert alert-danger">
              Department is required..!
            </small>
          </div>
          <!--Manager-->
          <label for="">Reporting Manager</label>
          <select class="form-control" formControlName="reporting_manager">
            <option value="">Reporitng Manager...</option>
            <option *ngFor="let m of managers" [value]="m">{{m}}</option>
          </select>
          <!-- <input type="text" class="form-control" formControlName="reporting_manager"> -->
          <div *ngIf="submitted && editUserForm.get('reporting_manager')?.invalid">
            <small *ngIf="submitted && editUserForm.get('reporting_manager')?.errors?.['required']" class="alert alert-danger">
              Manager is required..!
            </small>
          </div>
          <input type="text" placeholder="Password" class="form-control" formControlName="password">
          <div *ngIf="submitted && editUserForm.get('password')?.invalid">
            <small *ngIf="editUserForm.get('password')?.errors?.['required']" class="alert alert-danger">
              Password is required...!
            </small>
            <small *ngIf="editUserForm.get('password')?.errors?.['minlength']" class="alert alert-danger">
              Password length can't be less than 5 characters...!
            </small>
          </div>
          <div *ngIf="message">
            <small class="alert alert-success">{{message}}</small>
          </div>
          <button class="btn btn-primary" (click)="updateUser()">Update User</button>
        </form>
      </mat-card>
    </div>
  </div>
</div>
<app-footer id="my-footer"></app-footer>